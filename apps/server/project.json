{
  "name": "@nx-monorepo/server",
  "$schema": "../../node_modules/nx/schemas/project-schema.json",
  "sourceRoot": "apps/server/src",
  "projectType": "application",
  "tags": ["type:app"],
  "targets": {
    "spec-write": {
      "executor": "nx:run-commands",
      "options": {
        "commands": [
          "node -e \"const fs = require('fs'); const path = require('path'); const specPath = path.join(process.cwd(), 'dist', 'apps', 'server'); fs.mkdirSync(specPath, { recursive: true }); const { getOpenApiSpec } = require('./apps/server/dist/apps/server/src/openapi/index.js'); const spec = getOpenApiSpec(); fs.writeFileSync(path.join(specPath, 'openapi.json'), JSON.stringify(spec, null, 2));\""
        ],
        "cwd": "{workspaceRoot}"
      },
      "dependsOn": ["build"],
      "outputs": ["{workspaceRoot}/dist/apps/server/openapi.json"]
    },
    "spec-validate": {
      "executor": "nx:run-commands",
      "options": {
        "command": "pnpm --filter @nx-monorepo/server exec spectral lint ../../dist/apps/server/openapi.json --ruleset ../../.spectral.yaml",
        "cwd": "apps/server"
      },
      "dependsOn": ["spec-write"]
    }
  }
}
