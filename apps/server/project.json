{
  "name": "@nx-monorepo/server",
  "$schema": "../../node_modules/nx/schemas/project-schema.json",
  "sourceRoot": "apps/server/src",
  "projectType": "application",
  "tags": ["type:app"],
  "targets": {
    "docker-build": {
      "executor": "nx:run-commands",
      "options": {
        "command": "docker build -f apps/server/Dockerfile -t nx-monorepo-server .",
        "cwd": "{workspaceRoot}"
      },
      "dependsOn": ["build"]
    },
    "spec-write": {
      "executor": "nx:run-commands",
      "options": {
        "command": "tsx apps/server/scripts/write-openapi.ts",
        "cwd": "{workspaceRoot}"
      },
      "dependsOn": ["build"],
      "inputs": [
        "{workspaceRoot}/dist/apps/server/apps/server/src/**/*.js",
        "{projectRoot}/scripts/write-openapi.ts"
      ],
      "outputs": ["{workspaceRoot}/packages/api-client/src/gen/openapi.json"],
      "cache": false
    },
    "spec-validate": {
      "executor": "nx:run-commands",
      "options": {
        "command": "pnpm --filter @nx-monorepo/server exec spectral lint ../../packages/api-client/src/gen/openapi.json --ruleset ../../.spectral.yaml",
        "cwd": "apps/server"
      },
      "dependsOn": ["spec-write"]
    },
    "format:check": {}
  }
}
