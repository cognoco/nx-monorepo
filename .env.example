# =============================================================================
# Environment Variables Template
# =============================================================================
# This file is a TEMPLATE showing required environment variables.
# DO NOT put real credentials here - this file is tracked in git.
#
# SETUP INSTRUCTIONS:
# → RECOMMENDED: See docs/project-config/supabase.md for comprehensive setup guide
# → Manual setup:
#   1. Copy this file to .env.development.local (and .env.test.local if needed)
#   2. Go to: Supabase Dashboard → Project Settings → Database → Connection string
#   3. Select "Session pooler" tab
#   4. Copy the EXACT hostname from connection string (may be aws-1, aws-2, etc.)
#      ⚠️ DO NOT assume "aws-0" pattern - hostname varies by project assignment!
#   5. Fill in your PROJECT-REF, PASSWORD, and ANON-KEY from Supabase dashboard
#   6. Run: pnpm run validate:env to verify your setup
#
# REQUIRED FILES (each with different credentials):
# - .env.development.local (local development)
# - .env.test.local (CI/CD testing)
# - .env.production.local (production deployment - when needed)
#
# SECURITY:
# - All .env.*.local files are gitignored and should NEVER be committed
# - Only this .env.example template should be in version control
# - Each environment has DIFFERENT credentials (project refs, passwords, keys)
# =============================================================================

# =============================================================================
# DATABASE CONNECTIONS (Server-side only)
# =============================================================================
# Supabase + Prisma requires BOTH pooled and direct connections
# See docs/memories/adopted-patterns.md (Pattern 13) for detailed rationale
# Used by: apps/server, packages/database

# Transaction mode pooler for application queries (port 6543)
# - Uses Supavisor connection pooler for efficient connection management
# - Used by: Prisma runtime queries (findMany, create, update, delete)
# - Get from: Supabase Dashboard → Project Settings → Database → Connection Pooling → Transaction mode
# ⚠️ IMPORTANT: Copy exact hostname from dashboard (aws-X varies: aws-1, aws-2, etc.)
DATABASE_URL="postgresql://postgres.[PROJECT-REF]:[YOUR-PASSWORD]@aws-X-[REGION].pooler.supabase.com:6543/postgres?pgbouncer=true"

# Session mode pooler for migrations (port 5432)
# - Full PostgreSQL protocol support for schema operations
# - Required for: Prisma migrations, schema introspection, DDL operations
# - Used by: prisma migrate dev, prisma db push, prisma db pull
# - Get from: Supabase Dashboard → Project Settings → Database → Connection Pooling → Session mode
# ⚠️ IMPORTANT: Use same hostname as DATABASE_URL (copy from dashboard)
DIRECT_URL="postgresql://postgres.[PROJECT-REF]:[YOUR-PASSWORD]@aws-X-[REGION].pooler.supabase.com:5432/postgres"

# =============================================================================
# SUPABASE PUBLIC CREDENTIALS (Client-side safe)
# =============================================================================
# These credentials are safe to expose to the browser (used for auth only)
# Get these from: Supabase Dashboard → Project Settings → API
NEXT_PUBLIC_SUPABASE_URL="https://[PROJECT-REF].supabase.co"
NEXT_PUBLIC_SUPABASE_ANON_KEY="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."

# =============================================================================
# API SERVER (Development)
# =============================================================================
# URL where your Express API server is running
# Production: Update this to your deployed API URL
NEXT_PUBLIC_API_URL="http://localhost:4000/api"

# CORS origin for API server (allows cross-origin requests from this domain)
# Optional: Application defaults to http://localhost:3000,3001,3002 in development
# Development: Supports multiple origins (comma-separated) for scenarios where
#              multiple web apps run on different ports
# Production: Set to your deployed web app URL(s)
# Examples:
#   Single origin:   CORS_ORIGIN="http://localhost:3000"
#   Multiple origins: CORS_ORIGIN="http://localhost:3000,http://localhost:3001"
# Uncomment to override defaults:
# CORS_ORIGIN="http://localhost:3000"

# =============================================================================
# OPTIONAL SERVER CONFIGURATION
# =============================================================================
# These variables have sensible defaults and are only needed if you want
# to override the default behavior. Most developers can skip these.

# Server host address (defaults to localhost)
# HOST="0.0.0.0"

# Server port (defaults to 4000)
# PORT=5000

# Node environment (defaults to development)
# NODE_ENV="development"

# =============================================================================
# MULTI-ENVIRONMENT ARCHITECTURE
# =============================================================================
# This project uses separate Supabase environments for isolation and safety.
#
# Development Environment:
#   - Project: pjbnwtsufqpgsdlxydbo (ZIX-DEV org, eu-north-1)
#   - Use: Local development, experimental features
#   - File: .env.development.local
#   - Cost: Free tier
#
# Test Environment:
#   - Project: uvhnqtzufwvaqvbdgcnn (ZIX-DEV org, eu-north-1)
#   - Use: CI/CD testing, pre-production validation
#   - File: .env.test.local
#   - Cost: Free tier
#
# Production Environment (when needed):
#   - Project: TBD (separate organization recommended)
#   - Use: Live production deployment
#   - File: .env.production.local
#   - Cost: Paid tier with appropriate resources
#
# IMPORTANT NOTES:
# - Each environment has DIFFERENT project-ref, hostname, password, and anon key
# - Copy connection strings from each project's Supabase dashboard individually
# - Never share credentials between environments (security best practice)
# - Pooler hostname (aws-X) may vary between projects - always copy from dashboard
#
# For detailed project information and setup instructions, see: docs/project-config/supabase.md
# For architecture rationale, see: docs/memories/adopted-patterns.md (Pattern 13)
# =============================================================================

# =============================================================================
# SENTRY ERROR TRACKING & OBSERVABILITY
# =============================================================================
# Sentry provides error tracking and performance monitoring across all apps.
# Get credentials from: sentry.io → Your Org → Project Settings → Client Keys (DSN)
#
# SETUP:
# 1. Create project at sentry.io (Platform: Next.js)
# 2. Copy DSN from Project Settings → Client Keys
# 3. Create Auth Token at sentry.io → Settings → Auth Tokens (for source maps)

# DSN for Express server (apps/server)
# Used by: @sentry/node SDK
# Note: No NEXT_PUBLIC_ prefix - server-side only, not exposed to browser
SENTRY_DSN_SERVER="https://[KEY]@[ORG-ID].ingest.[REGION].sentry.io/[PROJECT-ID]"

# DSN for Next.js web app (apps/web)
# Used by: @sentry/nextjs SDK (both client and server components)
# Note: MUST have NEXT_PUBLIC_ prefix so Next.js exposes to browser bundle
NEXT_PUBLIC_SENTRY_DSN="https://[KEY]@[ORG-ID].ingest.[REGION].sentry.io/[PROJECT-ID]"

# Sentry organization and project slugs (for source map uploads)
# Get from: Your Sentry URL (e.g., sentry.io/organizations/YOUR-ORG/projects/YOUR-PROJECT)
SENTRY_ORG="your-org-slug"
SENTRY_PROJECT="your-project-slug"

# Auth token for CI/CD source map uploads (DO NOT commit real token!)
# Create at: sentry.io → Settings (user menu) → Auth Tokens
# Required scopes: project:releases, org:read
SENTRY_AUTH_TOKEN="sntrys_..."
# =============================================================================
