# =============================================================================
# Environment Variables Template
# =============================================================================
# This file is a TEMPLATE showing required environment variables.
# DO NOT put real credentials here - this file is tracked in git.
#
# SETUP INSTRUCTIONS:
# → Recommended: See docs/environment-setup.md for AI-assisted setup
# → Manual: Copy this to .env.[environment].local files and fill in values
#
# REQUIRED FILES (each with different credentials):
# - .env.development.local (local development)
# - .env.test.local (CI/CD testing)
# - .env.production.local (production deployment)
#
# SECURITY:
# - All .env.*.local files are gitignored and should NEVER be committed
# - Only this .env.example template should be in version control
# - Run `pnpm run validate:env` to verify your setup
# =============================================================================

# =============================================================================
# DATABASE CONNECTIONS (Server-side only)
# =============================================================================
# Supabase + Prisma requires BOTH pooled and direct connections
# Reference: specs/001-walking-skeleton/research-validation.md (Supavisor strategy)
# Used by: apps/server, packages/database

# Pooled connection for application queries (Transaction Mode, port 6543)
# - Uses Supavisor connection pooler for efficient connection management
# - Used by: Prisma runtime queries (findMany, create, update, delete)
# - Get from: Supabase Dashboard → Project Settings → Database → Connection Pooling → Transaction mode
DATABASE_URL="postgresql://postgres.[PROJECT-REF]:[YOUR-PASSWORD]@aws-0-[REGION].pooler.supabase.com:6543/postgres"

# Direct connection for migrations (Session Mode, port 5432)
# - Bypasses connection pooler for full PostgreSQL feature access
# - Required for: Prisma migrations, schema introspection, DDL operations
# - Used by: prisma migrate dev, prisma db push, prisma db pull
# - Get from: Supabase Dashboard → Project Settings → Database → Connection Pooling → Session mode
DIRECT_URL="postgresql://postgres.[PROJECT-REF]:[YOUR-PASSWORD]@aws-0-[REGION].pooler.supabase.com:5432/postgres"

# =============================================================================
# SUPABASE PUBLIC CREDENTIALS (Client-side safe)
# =============================================================================
# These credentials are safe to expose to the browser (used for auth only)
# Get these from: Supabase Dashboard → Project Settings → API
NEXT_PUBLIC_SUPABASE_URL="https://[PROJECT-REF].supabase.co"
NEXT_PUBLIC_SUPABASE_ANON_KEY="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."

# =============================================================================
# API SERVER (Development)
# =============================================================================
# URL where your Express API server is running
# Production: Update this to your deployed API URL
NEXT_PUBLIC_API_URL="http://localhost:3001/api"

# CORS origin for API server (allows cross-origin requests from this domain)
# Development: Defaults to http://localhost:3000
# Production: Set to your deployed web app URL
CORS_ORIGIN="http://localhost:3000"

# =============================================================================
# MULTI-ENVIRONMENT ARCHITECTURE
# =============================================================================
# This project uses separate Supabase environments:
#
# Development (existing project):
#   - Project: pjbnwtsufqpgsdlxydbo (ZIX-DEV org)
#   - Use: Local development
#   - File: .env.development.local
#
# Test (Supabase branch ~$10/month):
#   - Branch: "test" from pjbnwtsufqpgsdlxydbo
#   - Use: CI/CD testing
#   - File: .env.test.local
#
# Production (separate project):
#   - Project: nx-monorepo-prod (PIX org)
#   - Use: Production deployment
#   - File: .env.production.local
#
# Each environment has DIFFERENT URLs and credentials.
# See docs/supabase-projects.md for details.
# =============================================================================
